# ============================================================================
# Gradle Daemon JVM Configuration
# ============================================================================
# These settings persist across builds and are shared by all Gradle tasks
# Recommended for Spring Boot projects with moderate complexity

# Combined JVM arguments (declared once, all options together)
# Memory: Xms (initial) 1GB, Xmx (max) 2GB
# Metaspace: Initial 256MB, Max 512MB (for Spring Boot class metadata)
# GC: G1GC (modern, low-latency garbage collector)
# Debugging: Heap dump on OOM, UTF-8 encoding
org.gradle.jvmargs=-Xms1g -Xmx2g \
    -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=512m \
    -XX:+UseG1GC \
    -XX:+HeapDumpOnOutOfMemoryError \
    -XX:HeapDumpPath=./build/heap-dumps/ \
    -Dfile.encoding=UTF-8

# ============================================================================
# Gradle Build Performance Optimizations
# ============================================================================

# Enable daemon (reuses JVM across builds, 3-10x faster for incremental builds)
org.gradle.daemon=true

# Parallel execution (leverages multi-core CPUs)
# Safe for most projects; disable if builds are non-deterministic
org.gradle.parallel=true

# Build cache (reuses outputs from previous builds and other machines)
# Essential for CI/CD pipelines and large teams
org.gradle.caching=true

# Configuration on demand (only configure required projects in multi-module builds)
# Reduces configuration time in large multi-project setups
org.gradle.configureondemand=true

# ============================================================================
# Dependency Resolution & Network
# ============================================================================

# Dependency verification for security (recommended for prod)
# Prevents supply-chain attacks via dependency substitution
org.gradle.dependency.verification=lenient

# HTTP timeout for slow networks/mirrors (60 seconds)
org.gradle.internal.http.connectionTimeout=60000
org.gradle.internal.http.socketTimeout=60000

# ============================================================================
# Warning & Deprecation Handling
# ============================================================================

# Show full stacktraces for build failures
org.gradle.logging.stacktrace=all

# Warn on deprecated Gradle features (helps with future Gradle upgrades)
org.gradle.warning.mode=all

# ============================================================================
# Environment-Specific Overrides (Optional)
# ============================================================================
# Can be overridden via CLI: ./gradlew build -Dorg.gradle.jvmargs="-Xmx4g"
# Or via GRADLE_OPTS environment variable for CI/CD
